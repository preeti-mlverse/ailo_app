{"dependencies":[{"name":"./getUniqueID","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"4JwrWQSZtc50KQpaRjRbnVmjxeA=","exportNames":["*"],"imports":1}},{"name":"./getTokenTypeByToken","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":56,"index":97}}],"key":"PMc6A+qkYtCKG7S1QyRx2DvJYu0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return tokensToAST;\n    }\n  });\n  var _getUniqueID = require(_dependencyMap[0], \"./getUniqueID\");\n  var getUniqueID = _interopDefault(_getUniqueID);\n  var _getTokenTypeByToken = require(_dependencyMap[1], \"./getTokenTypeByToken\");\n  var getTokenTypeByToken = _interopDefault(_getTokenTypeByToken);\n  /**\n   *\n   * @param {{type: string, tag:string, content: string, children: *, attrs: Array, meta, info, block: boolean}} token\n   * @param {number} tokenIndex\n   * @return {{type: string, content, tokenIndex: *, index: number, attributes: {}, children: *}}\n   */\n  function createNode(token, tokenIndex) {\n    const type = (0, getTokenTypeByToken.default)(token);\n    const content = token.content;\n    let attributes = {};\n    if (token.attrs) {\n      attributes = token.attrs.reduce((prev, curr) => {\n        const [name, value] = curr;\n        return {\n          ...prev,\n          [name]: value\n        };\n      }, {});\n    }\n    return {\n      type,\n      sourceType: token.type,\n      sourceInfo: token.info,\n      sourceMeta: token.meta,\n      block: token.block,\n      markup: token.markup,\n      key: (0, getUniqueID.default)() + '_' + type,\n      content,\n      tokenIndex,\n      index: 0,\n      attributes,\n      children: tokensToAST(token.children)\n    };\n  }\n\n  /**\n   *\n   * @param {Array<{type: string, tag:string, content: string, children: *, attrs: Array}>}tokens\n   * @return {Array}\n   */\n  function tokensToAST(tokens) {\n    let stack = [];\n    let children = [];\n    if (!tokens || tokens.length === 0) {\n      return [];\n    }\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      const astNode = createNode(token, i);\n      if (!(astNode.type === 'text' && astNode.children.length === 0 && astNode.content === '')) {\n        astNode.index = children.length;\n        if (token.nesting === 1) {\n          children.push(astNode);\n          stack.push(children);\n          children = astNode.children;\n        } else if (token.nesting === -1) {\n          children = stack.pop();\n        } else if (token.nesting === 0) {\n          children.push(astNode);\n        }\n      }\n    }\n    return children;\n  }\n});","lineCount":86,"map":[[12,2,44,15,"Object"],[12,8,44,15],[12,9,44,15,"defineProperty"],[12,23,44,15],[12,24,44,15,"exports"],[12,31,44,15],[13,4,44,15,"enumerable"],[13,14,44,15],[14,4,44,15,"get"],[14,7,44,15],[14,18,44,15,"get"],[14,19,44,15],[15,6,44,15],[15,13,44,15,"tokensToAST"],[15,24,44,15],[16,4,44,15],[17,2,44,15],[18,2,1,0],[18,6,1,0,"_getUniqueID"],[18,18,1,0],[18,21,1,0,"require"],[18,28,1,0],[18,29,1,0,"_dependencyMap"],[18,43,1,0],[19,2,1,0],[19,6,1,0,"getUniqueID"],[19,17,1,0],[19,20,1,0,"_interopDefault"],[19,35,1,0],[19,36,1,0,"_getUniqueID"],[19,48,1,0],[20,2,2,0],[20,6,2,0,"_getTokenTypeByToken"],[20,26,2,0],[20,29,2,0,"require"],[20,36,2,0],[20,37,2,0,"_dependencyMap"],[20,51,2,0],[21,2,2,0],[21,6,2,0,"getTokenTypeByToken"],[21,25,2,0],[21,28,2,0,"_interopDefault"],[21,43,2,0],[21,44,2,0,"_getTokenTypeByToken"],[21,64,2,0],[22,2,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,2,10,0],[28,11,10,9,"createNode"],[28,21,10,19,"createNode"],[28,22,10,20,"token"],[28,27,10,25],[28,29,10,27,"tokenIndex"],[28,39,10,37],[28,41,10,39],[29,4,11,2],[29,10,11,8,"type"],[29,14,11,12],[29,17,11,15],[29,21,11,15,"getTokenTypeByToken"],[29,40,11,34],[29,41,11,34,"default"],[29,48,11,34],[29,50,11,35,"token"],[29,55,11,40],[29,56,11,41],[30,4,12,2],[30,10,12,8,"content"],[30,17,12,15],[30,20,12,18,"token"],[30,25,12,23],[30,26,12,24,"content"],[30,33,12,31],[31,4,14,2],[31,8,14,6,"attributes"],[31,18,14,16],[31,21,14,19],[31,22,14,20],[31,23,14,21],[32,4,16,2],[32,8,16,6,"token"],[32,13,16,11],[32,14,16,12,"attrs"],[32,19,16,17],[32,21,16,19],[33,6,17,4,"attributes"],[33,16,17,14],[33,19,17,17,"token"],[33,24,17,22],[33,25,17,23,"attrs"],[33,30,17,28],[33,31,17,29,"reduce"],[33,37,17,35],[33,38,17,36],[33,39,17,37,"prev"],[33,43,17,41],[33,45,17,43,"curr"],[33,49,17,47],[33,54,17,52],[34,8,18,6],[34,14,18,12],[34,15,18,13,"name"],[34,19,18,17],[34,21,18,19,"value"],[34,26,18,24],[34,27,18,25],[34,30,18,28,"curr"],[34,34,18,32],[35,8,19,6],[35,15,19,13],[36,10,19,14],[36,13,19,17,"prev"],[36,17,19,21],[37,10,19,23],[37,11,19,24,"name"],[37,15,19,28],[37,18,19,31,"value"],[38,8,19,36],[38,9,19,37],[39,6,20,4],[39,7,20,5],[39,9,20,7],[39,10,20,8],[39,11,20,9],[39,12,20,10],[40,4,21,2],[41,4,23,2],[41,11,23,9],[42,6,24,4,"type"],[42,10,24,8],[43,6,25,4,"sourceType"],[43,16,25,14],[43,18,25,16,"token"],[43,23,25,21],[43,24,25,22,"type"],[43,28,25,26],[44,6,26,4,"sourceInfo"],[44,16,26,14],[44,18,26,16,"token"],[44,23,26,21],[44,24,26,22,"info"],[44,28,26,26],[45,6,27,4,"sourceMeta"],[45,16,27,14],[45,18,27,16,"token"],[45,23,27,21],[45,24,27,22,"meta"],[45,28,27,26],[46,6,28,4,"block"],[46,11,28,9],[46,13,28,11,"token"],[46,18,28,16],[46,19,28,17,"block"],[46,24,28,22],[47,6,29,4,"markup"],[47,12,29,10],[47,14,29,12,"token"],[47,19,29,17],[47,20,29,18,"markup"],[47,26,29,24],[48,6,30,4,"key"],[48,9,30,7],[48,11,30,9],[48,15,30,9,"getUniqueID"],[48,26,30,20],[48,27,30,20,"default"],[48,34,30,20],[48,36,30,21],[48,37,30,22],[48,40,30,25],[48,43,30,28],[48,46,30,31,"type"],[48,50,30,35],[49,6,31,4,"content"],[49,13,31,11],[50,6,32,4,"tokenIndex"],[50,16,32,14],[51,6,33,4,"index"],[51,11,33,9],[51,13,33,11],[51,14,33,12],[52,6,34,4,"attributes"],[52,16,34,14],[53,6,35,4,"children"],[53,14,35,12],[53,16,35,14,"tokensToAST"],[53,27,35,25],[53,28,35,26,"token"],[53,33,35,31],[53,34,35,32,"children"],[53,42,35,40],[54,4,36,2],[54,5,36,3],[55,2,37,0],[57,2,39,0],[58,0,40,0],[59,0,41,0],[60,0,42,0],[61,0,43,0],[62,2,44,15],[62,11,44,24,"tokensToAST"],[62,22,44,35,"tokensToAST"],[62,23,44,36,"tokens"],[62,29,44,42],[62,31,44,44],[63,4,45,2],[63,8,45,6,"stack"],[63,13,45,11],[63,16,45,14],[63,18,45,16],[64,4,46,2],[64,8,46,6,"children"],[64,16,46,14],[64,19,46,17],[64,21,46,19],[65,4,48,2],[65,8,48,6],[65,9,48,7,"tokens"],[65,15,48,13],[65,19,48,17,"tokens"],[65,25,48,23],[65,26,48,24,"length"],[65,32,48,30],[65,37,48,35],[65,38,48,36],[65,40,48,38],[66,6,49,4],[66,13,49,11],[66,15,49,13],[67,4,50,2],[68,4,52,2],[68,9,52,7],[68,13,52,11,"i"],[68,14,52,12],[68,17,52,15],[68,18,52,16],[68,20,52,18,"i"],[68,21,52,19],[68,24,52,22,"tokens"],[68,30,52,28],[68,31,52,29,"length"],[68,37,52,35],[68,39,52,37,"i"],[68,40,52,38],[68,42,52,40],[68,44,52,42],[69,6,53,4],[69,12,53,10,"token"],[69,17,53,15],[69,20,53,18,"tokens"],[69,26,53,24],[69,27,53,25,"i"],[69,28,53,26],[69,29,53,27],[70,6,54,4],[70,12,54,10,"astNode"],[70,19,54,17],[70,22,54,20,"createNode"],[70,32,54,30],[70,33,54,31,"token"],[70,38,54,36],[70,40,54,38,"i"],[70,41,54,39],[70,42,54,40],[71,6,56,4],[71,10,57,6],[71,12,58,8,"astNode"],[71,19,58,15],[71,20,58,16,"type"],[71,24,58,20],[71,29,58,25],[71,35,58,31],[71,39,59,8,"astNode"],[71,46,59,15],[71,47,59,16,"children"],[71,55,59,24],[71,56,59,25,"length"],[71,62,59,31],[71,67,59,36],[71,68,59,37],[71,72,60,8,"astNode"],[71,79,60,15],[71,80,60,16,"content"],[71,87,60,23],[71,92,60,28],[71,94,60,30],[71,95,61,7],[71,97,62,6],[72,8,63,6,"astNode"],[72,15,63,13],[72,16,63,14,"index"],[72,21,63,19],[72,24,63,22,"children"],[72,32,63,30],[72,33,63,31,"length"],[72,39,63,37],[73,8,65,6],[73,12,65,10,"token"],[73,17,65,15],[73,18,65,16,"nesting"],[73,25,65,23],[73,30,65,28],[73,31,65,29],[73,33,65,31],[74,10,66,8,"children"],[74,18,66,16],[74,19,66,17,"push"],[74,23,66,21],[74,24,66,22,"astNode"],[74,31,66,29],[74,32,66,30],[75,10,67,8,"stack"],[75,15,67,13],[75,16,67,14,"push"],[75,20,67,18],[75,21,67,19,"children"],[75,29,67,27],[75,30,67,28],[76,10,68,8,"children"],[76,18,68,16],[76,21,68,19,"astNode"],[76,28,68,26],[76,29,68,27,"children"],[76,37,68,35],[77,8,69,6],[77,9,69,7],[77,15,69,13],[77,19,69,17,"token"],[77,24,69,22],[77,25,69,23,"nesting"],[77,32,69,30],[77,37,69,35],[77,38,69,36],[77,39,69,37],[77,41,69,39],[78,10,70,8,"children"],[78,18,70,16],[78,21,70,19,"stack"],[78,26,70,24],[78,27,70,25,"pop"],[78,30,70,28],[78,31,70,29],[78,32,70,30],[79,8,71,6],[79,9,71,7],[79,15,71,13],[79,19,71,17,"token"],[79,24,71,22],[79,25,71,23,"nesting"],[79,32,71,30],[79,37,71,35],[79,38,71,36],[79,40,71,38],[80,10,72,8,"children"],[80,18,72,16],[80,19,72,17,"push"],[80,23,72,21],[80,24,72,22,"astNode"],[80,31,72,29],[80,32,72,30],[81,8,73,6],[82,6,74,4],[83,4,75,2],[84,4,77,2],[84,11,77,9,"children"],[84,19,77,17],[85,2,78,0],[86,0,78,1],[86,3]],"functionMap":{"names":["<global>","createNode","token.attrs.reduce$argument_0","tokensToAST"],"mappings":"AAA;ACS;oCCO;KDG;CDiB;eGO;CHkC"},"hasCjsExports":false},"type":"js/module"}]}